<!--
Title: spirograph.html
Desc: A translate example (MDN: Transformations).
By: Daniel R. (sadasant.com)
Version: 0.01
License: http://opensource.org/licenses/mit-license.php
-->
<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8 />
    <title>spirographs</title>
    <!--[if IE]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <style>
      article, aside, figure, footer, header, hgroup, 
      menu, nav, section { display: block; }
      canvas {
        background: #000;
        border:1px solid black;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas"></canvas>
    <p id="log">Logs</p>
  </body>
  <script src="../libs/d0.js"></script>
  <script src="../libs/Can.js"></script>
  <script>
    window.onload = function (){
      Can.setCan("canvas","2d",600,600);
      d0.mouse.detectMove("log");
      d0.bug(Can.can);
      var color = { r: 150, g:255, b:0, x: 0, y: 0 },
          graph = Can.line(300,300,"#96FF00");
      function draw() {
        var con = Can.con;
            i = (d0.mouse.x - 300)/20,
            j = (d0.mouse.y - 300)/20;
        if (color.x !== d0.mouse.x || color.y !== d0.mouse.y){
          var date = new Date(),
              mill = date.getMilliseconds();
          var rand = Math.ceil(255*Math.random());
          color.x = d0.mouse.x;
          color.y = d0.mouse.y;
          //d0.bug(rand);
          if (!(mill%5)) {
            color.r = rand;
          } else
          if (!(mill%6)) {
            color.g = rand;
          }
          if (!(mill%7)) {
            color.b = rand;
          }
        }
        graph.stroke = "rgba("+color.r+", "+color.g+", "+color.b+", 0.13)";
        var R = 20*(j+2)/(j+1),
            r = -8*(i+3)/(i+1),
            O = 10,
            x1 = R-O;
            y1 = 0;
            z  = 1,
            moves = [[x1,y1]];
        do {
          if (z>20000) break;
          var x2 = (R+r)*Math.cos(z*Math.PI/72) - (r+O)*Math.cos(((R+r)/r)*(z*Math.PI/72)),
              y2 = (R+r)*Math.sin(z*Math.PI/72) - (r+O)*Math.sin(((R+r)/r)*(z*Math.PI/72));
          moves[z] = [x2,y2];
          z++;
        } while (x2 != R-O && y2 != 0 );
        x1 = x2;
        y1 = y2;
        graph.moves = moves;
        Can.draw(graph,"rgba(0, 0, 0, 0.05)");
      }
      setInterval(draw,33);
    }
</script>
</html>