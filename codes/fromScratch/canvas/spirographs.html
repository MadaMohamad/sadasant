<!--
Title: spirograph.html
Desc: A translate example (MDN: Transformations).
By: Daniel R. (sadasant.com)
Version: 0.01
License: http://opensource.org/licenses/mit-license.php
link:http://jsbin.com/odicom
-->
<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8 />
    <title>spirographs</title>
    <!--[if IE]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <style>
      article, aside, figure, footer, header, hgroup, 
      menu, nav, section { display: block; }
      body {
        background: #000;
        overflow:hidden;
      }
      #info {
        position:fixed;
        width:100%;
        top:0px;
        text-align:center;
        color:#96FF00 ;
      }
      a:link { color:#96FF00; }
      a:visited { color:#96FF00; }
      a:hover { color:#96FF00; }
    </style>
  </head>
  <body>
    <div id="info"><em><b>Spirographs</b></em></br>A canvas translate example <a href="http://sadasant.com">I</a> made with some code I found <a href="https://developer.mozilla.org/en/Canvas_tutorial/Transformations">here</a>.</div>
    <canvas id="canvas"></canvas>
  </body>
  <script src="../libs/d0.js"></script>
  <script>
  window.onload = function (){
    var can = d0.gEBI("canvas"),
        win = d0.getWindowSize();
    can.width = win.w;
    can.height = win.h;
    var con = can.getContext("2d"),
        center = {x:can.width/2,y:can.height/2},
        color = { r: 150, g:255, b:0, x: 0, y: 0 };
    d0.mouse.detectMove();
    function draw() {
      var i = (d0.mouse.x - center.x)/20,
          j = (d0.mouse.y - center.y)/20;
      con.fillStyle = "rgba(0, 0, 0, 0.05)";
      con.fillRect(0, 0, can.width, can.height);
      con.save();
      if (color.x !== d0.mouse.x || color.y !== d0.mouse.y){
        var r3 = Math.floor(2*Math.random()),
            r255 = Math.ceil(255*Math.random());
        color.x = d0.mouse.x;
        color.y = d0.mouse.y;
        switch (r3) {
          case 0: color.r = r255; break;
          case 1: color.g = r255; break;
          case 2: color.b = r255; break;
        }
      }
      con.strokeStyle = "rgba("+color.r+", "+color.g+", "+color.b+", 0.13)";
      con.translate(center.x,center.y);
      var R = 20*(j+2)/(j+1), r = -8*(i+3)/(i+1), O = 10,
          x1 = R-O, y1 = 0,
          x2 = 0, y2 = 0,
          c  = 1;
      con.beginPath();
      con.moveTo(x1,y1);
      do {
        x2 = (R+r)*Math.cos(c*Math.PI/72) - (r+O)*Math.cos(((R+r)/r)*(c*Math.PI/72));
        y2 = (R+r)*Math.sin(c*Math.PI/72) - (r+O)*Math.sin(((R+r)/r)*(c*Math.PI/72));
        con.lineTo(x2,y2);
        c++;
      } while (x2 !== R-O && y2 !== 0 && c<=20000);
      x1 = x2;
      y1 = y2;
      con.stroke();
      con.restore();
    }
    setInterval(draw,33);
  };
</script>
</html>